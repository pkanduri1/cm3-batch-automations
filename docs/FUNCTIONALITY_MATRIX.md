# Functionality Matrix

Comprehensive matrix of what CM3 Batch Automations provides.

## CLI Capabilities

| Capability | Command | Input(s) | Output(s) | Notes |
|---|---|---|---|---|
| System info | `cm3-batch info` | env/system | console | validates runtime deps |
| Format detect | `cm3-batch detect -f <file>` | file | console | auto-detect fixed/delimited |
| Parse | `cm3-batch parse -f ... -m ...` | data file + optional mapping | console/CSV | supports fixed-width and delimited |
| Parse (chunked) | `cm3-batch parse --use-chunked` | large file | CSV/console | memory-efficient |
| Validate | `cm3-batch validate -f ... -m ...` | file + mapping | HTML/JSON + console | quality metrics + issues |
| Validate with rules | `cm3-batch validate ... -r <rules.json>` | file + mapping + rules | HTML/JSON + console | fails with non-zero on invalid |
| Validate strict fixed-width | `cm3-batch validate ... --strict-fixed-width --strict-level format|all` | fixed-width file + mapping | HTML/JSON + console | field-level required/format/value checks |
| Validate (chunked) | `cm3-batch validate --use-chunked` | large file | JSON or HTML + sidecar CSVs | supports failure reports + progress bar |
| Validate (chunked strict) | `cm3-batch validate --use-chunked --strict-fixed-width` | large fixed-width file + mapping | JSON/HTML + sidecar CSVs | includes row + field-level defects |
| Compare | `cm3-batch compare -f1 ... -f2 ... -k ...` | two files + keys | HTML/console | fixed-width compare supports `--mapping` |
| Extract | `cm3-batch extract -t/-q/-s ...` | Oracle table/query/sql-file | delimited file | streaming mode for large extracts |
| Reconcile | `cm3-batch reconcile -m ...` | mapping + Oracle schema | console/report | schema compatibility |
| Reconcile all | `cm3-batch reconcile-all` | mapping directory + Oracle schema | JSON/report | drift detection supported |
| Convert rules | `cm3-batch convert-rules -t ... -o ...` | Excel/CSV rules template | rules JSON | BA-friendly templates supported |
| GE checkpoint | `cm3-batch gx-checkpoint1 ...` | targets CSV + expectations CSV | JSON/CSV/HTML | BA config-first data quality checks |

## API Capabilities

| Area | Endpoint family | Primary use |
|---|---|---|
| System | `/api/v1/system/*` | health and service metadata |
| Mappings | `/api/v1/mappings/*` | upload/list/get/validate/delete mappings |
| Files | `/api/v1/files/*` | detect/parse/validate/compare via HTTP (sync + async compare jobs, strict/chunked validate parity) |

## Reporting Outputs

| Report Type | Generated By | Format |
|---|---|---|
| Validation report | `validate` | HTML |
| Chunked validation report | `validate --use-chunked` | JSON/HTML |
| Errors sidecar | validation reporter | CSV (`*_errors.csv`) |
| Warnings sidecar | validation reporter | CSV (`*_warnings.csv`) |
| Comparison report | `compare` | HTML |
| GE summary | `gx-checkpoint1` | JSON/CSV/HTML |

## Data Sources Supported
- Fixed-width files (mapping-driven)
- Pipe-delimited/CSV/TSV files
- Oracle database (table, query, SQL file)

## Operational Modes
- CLI-first batch processing
- REST API server mode (FastAPI)
- CI/CD execution (unit tests, docs build, optional reconcile drift checks)
